<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout.html">
<div layout:fragment="content">
    <link rel="stylesheet" href="/css/watch/stream.css">
    <link rel="stylesheet" href="/css/webrtc/product_modal.css">
    <link rel="stylesheet" href="/webjars/ekko-lightbox/5.2.0/dist/ekko-lightbox.css">
    <link rel="stylesheet" href="/webjars/demo-console/1.5.1/index.css">
    <link rel="shortcut icon" href="/img/kurento.png" type="image/png" />

    <script src="/webjars/jquery/3.7.1/dist/jquery.js"></script>
    <script src="/webjars/ekko-lightbox/5.2.0/dist/ekko-lightbox.min.js"></script>
    <script src="/webjars/webrtc-adapter/7.4.0/release/adapter.js"></script>
    <script src="/webjars/demo-console/1.5.1/index.js"></script>
    
    <script type="text/javascript" th:inline="javascript">
        let streamInfo = [[${streamInfo}]]
        let streamNo = (typeof streamInfo !== "undefined" && streamInfo !== null) ? streamInfo.streamNo : null;
    </script>
    <script src="/js/stream/register_stream.js"></script>
    <script src="/js/stream/product_modal.js"></script>
    <script src="/js/kurento-utils.js"></script>
    <script src="/js/stream/stream.js"></script>

    <div class="main-contents">
        <div class="content-container">
            <div class="live-container">
                <div class="video">
                    <video id="live-video" autoplay playsinline>
                    </video>
                </div>
            </div>
            <div class="chat-container">
                <div id="chat">
                    <h1>Ï±ÑÌåÖÌôîÎ©¥</h1>
                </div>
            </div>
            <div class="product-container">
                <div id="product">
                    <div class="product-form">
                        <!-- Î∞©ÏÜ° Ï†úÎ™© -->
                        <div class="form-group horizontal">
                            <label for="broadcastTitle">Î∞©ÏÜ° Ï†úÎ™©</label>
                            <input type="text" id="broadcastTitle" placeholder="Î∞©ÏÜ° Ï†úÎ™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
                            th:value="${streamInfo != null ? streamInfo.streamTitle : ''}" />
                        </div>
                        
                        <!-- Î∞©ÏÜ° ÏÑ§Î™Ö -->
                        <div class="form-group horizontal">
                            <label for="broadcastDesc">Î∞©ÏÜ° ÏÑ§Î™Ö</label>
                            <textarea id="broadcastDesc" placeholder="Î∞©ÏÜ° ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
                            th:text="${streamInfo != null ? streamInfo.streamDescription : ''}"></textarea>
                        </div>
                        
                        <!-- ÏÉÅÌíà ÏÑ†ÌÉù -->
                        <div class="form-group horizontal select-group">
                            <label>ÏÉÅÌíà ÏÑ†ÌÉù</label>
                            <button type="button" class="select-btn">+ ÏÑ†ÌÉù</button>
                        </div>
                        
                        <!-- ÏÉÅÌíà Í≤ÄÏÉâ Î™®Îã¨(ÌåùÏóÖ) -->
                        <div id="productModal" class="modal">
                            <div class="modal-content">
                                <!-- Îã´Í∏∞(X) Î≤ÑÌäº -->
                                <span class="close">&times;</span>
                                
                                <!-- Î™®Îã¨ Ï†úÎ™© -->
                                <h2 class="modal-title">ÏÉÅÌíà Í≤ÄÏÉâ</h2>
                                
                                <!-- Í≤ÄÏÉâ ÏòÅÏó≠ -->
                                <div class="search-bar">
                                    <input type="text" placeholder="ÏÉÅÌíàÏùÑ Í≤ÄÏÉâÌïòÏÑ∏Ïöî" />
                                    <button class="search-btn">
                                        <!-- Í∞ÑÎã®Ìïú ÏïÑÏù¥ÏΩò(Ïù¥Î™®ÏßÄÎÇò FontAwesome Îì± ÏÇ¨Ïö© Í∞ÄÎä•) -->
                                        <span style="font-size:16px;">üîç</span>
                                    </button>
                                </div>
                                
                                <!-- ÏÉÅÌíà Î™©Î°ù (Ïä§ÌÅ¨Î°§) -->
                                <div class="product-list-container">
                                    <ul class="product-list">
                                    
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ÏÑ†ÌÉùÎêú ÏÉÅÌíà -->
                        <div class="product-element">
                            <img th:src="@{'/img/product_img/' + ${streamInfo.productImg}}" alt="ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ" class="product-img" th:if="${streamInfo != null}">
                            <div class="product-info" th:id="${streamInfo != null ? streamInfo.productNo : ''}" th:if="${streamInfo != null}">
                                <p class="product-name" th:text="${streamInfo.productName}"></p>
                                <div class="product-price-container">
                                    <p class="product-origin-price" th:text="${streamInfo.productPrice}"></p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ìï†Ïù∏Ïú® -->
                        <div class="form-group horizontal discount-group">
                            <label for="discountRate">Ìï† Ïù∏ Ïú®</label>
                            <div class="discount-input">
                                <input type="number" id="discountRate" placeholder="0" min="0" max="100"
                                th:value="${streamInfo != null ? streamInfo.productSale : ''}"/>
                                <span>%</span>
                            </div>
                        </div>
                        
                        <!-- ÏóÖÎç∞Ïù¥Ìä∏ Î≤ÑÌäº -->
                        <div class="form-group horizontal update-group">
                            <button class="update-btn">ÏóÖÎç∞Ïù¥Ìä∏</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <br>
    <div class="settings-buttons">
        <div class="buttons-container">
            <button id="start" onclick="startLive()" class="btn btn-success">
                <span class="glyphicon glyphicon-play"></span>ÏÜ°Ï∂úÏãúÏûë</button>
            <button id="stop" onclick="stopLive()" class="btn btn-danger">
                <span class="glyphicon glyphicon-stop"></span>ÏÜ°Ï∂úÏ¢ÖÎ£å</button>
        </div>
    </div>
    <br>
</div>
</html>